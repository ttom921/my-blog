"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[8625],{35:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>l,default:()=>o,frontMatter:()=>c,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"\u5b78\u7fd2/rust/rustbasic/rust_\u518d\u770b\u751f\u547d\u9031\u671f_Lifetime_revisit","title":"24-rust_\u518d\u770b\u751f\u547d\u9031\u671f_Lifetime_revisit","description":"_\u518d\u770b\u751f\u547d\u9031\u671f_Lifetime_revisit","source":"@site/docs/\u5b78\u7fd2/rust/rustbasic/24-rust_\u518d\u770b\u751f\u547d\u9031\u671f_Lifetime_revisit.md","sourceDirName":"\u5b78\u7fd2/rust/rustbasic","slug":"/\u5b78\u7fd2/rust/rustbasic/rust_\u518d\u770b\u751f\u547d\u9031\u671f_Lifetime_revisit","permalink":"/my-blog/docs/\u5b78\u7fd2/rust/rustbasic/rust_\u518d\u770b\u751f\u547d\u9031\u671f_Lifetime_revisit","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":24,"frontMatter":{"\uff03id":"doc-markdown","title":"24-rust_\u518d\u770b\u751f\u547d\u9031\u671f_Lifetime_revisit","description":"_\u518d\u770b\u751f\u547d\u9031\u671f_Lifetime_revisit","keywords":["rust"],"last_update":{"date":"5/14/2024","author":"ttom"}},"sidebar":"tutorialSidebar","previous":{"title":"23-rust_\u7df4\u7fd2_CLI\u61c9\u7528\u7a0b\u5f0f\u5957\u4ef6","permalink":"/my-blog/docs/\u5b78\u7fd2/rust/rustbasic/rust_\u7df4\u7fd2_CLI\u61c9\u7528\u7a0b\u5f0f\u5957\u4ef6"},"next":{"title":"25-rust_\u628a\u6771\u897f\u5370\u51fa\u4f86","permalink":"/my-blog/docs/\u5b78\u7fd2/rust/rustbasic/rust_\u628a\u6771\u897f\u5370\u51fa\u4f86"}}');var s=n(4848),i=n(8453);const c={"\uff03id":"doc-markdown",title:"24-rust_\u518d\u770b\u751f\u547d\u9031\u671f_Lifetime_revisit",description:"_\u518d\u770b\u751f\u547d\u9031\u671f_Lifetime_revisit",keywords:["rust"],last_update:{date:"5/14/2024",author:"ttom"}},l=void 0,a={},d=[{value:"Struct \u88e1\u7684\u751f\u547d\u9031\u671f",id:"struct-\u88e1\u7684\u751f\u547d\u9031\u671f",level:2},{value:"Impl \u7684\u751f\u547d\u9031\u671f",id:"impl-\u7684\u751f\u547d\u9031\u671f",level:3},{value:"\u6cdb\u578b + \u751f\u547d\u9031\u671f",id:"\u6cdb\u578b--\u751f\u547d\u9031\u671f",level:3},{value:"Enum \u88e1\u7684\u751f\u547d\u9031\u671f",id:"enum-\u88e1\u7684\u751f\u547d\u9031\u671f",level:2}];function u(e){const r={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.p,{children:"\u65b0\u624b\uff08\u5305\u62ec\u6211\u4e5f\u662f\uff09\u5728\u5b78\u7fd2 Rust \u9019\u689d\u8def\u4e0a\u7684\u5169\u5927\u9b54\u738b\uff1a\u300c\u6240\u6709\u6b0a\uff08Ownership\uff09\u300d\u4ee5\u53ca\u300c\u751f\u547d\u9031\u671f\uff08Lifetime\uff09\u300d\uff0c\u5728\u524d\u9762\u7ae0\u7bc0\u6211\u5011\u66fe\u7d93\u4ecb\u7d39\u904e\u4e86\u751f\u547d\u9031\u671f\uff0c\u4f46\u5728\u4ecb\u7d39\u904e\u4e86 Struct\u3001Enum\u3001Trait \u4ee5\u53ca\u6cdb\u578b\u4e4b\u5f8c\uff0c\u751f\u547d\u9031\u671f\u6a19\u8a18\u8ddf\u9019\u4e9b\u6771\u897f\u7684\u7d44\u5408\u4e4b\u5f8c\u53c8\u6703\u8b8a\u7684\u66f4\u8907\u96dc\u4e00\u4e9b..."}),"\n",(0,s.jsxs)(r.p,{children:["\u8ddf\u578b\u5225\u63a8\u5c0e\u4e00\u6a23\uff0c\u5176\u5be6 Rust \u7684\u7de8\u8b6f\u5668\u5927\u591a\u6578\u6642\u5019\u662f\u53ef\u4ee5\u53ef\u4ee5\u81ea\u5df1\u63a8\u5c0e\u751f\u547d\u9031\u671f\u7684\uff0c\u6240\u4ee5\u5927\u90e8\u4efd\u6642\u5019\u4e0d\u7279\u5225\u6a19\u8a18\u4e5f\u6c92\u4ec0\u9ebc\u554f\u984c\u3002\u4e4b\u6240\u4ee5\u9700\u8981\u6a19\u8a18\u751f\u547d\u9031\u671f\u7684\u539f\u56e0\uff0c\u5c31\u662f\u56e0\u70ba\u6240\u6709\u6b0a\u6709\u6771\u897f\u501f\u4f86\u501f\u53bb\u7684\u95dc\u4fc2\uff0c\u70ba\u4e86\u8981\u8b93\u67d0\u4e9b\u503c\u6d3b\u7684\u5920\u4e45\u53c8\u4e0d\u8981\u6d3b\u592a\u4e45\uff0c\u6240\u4ee5\u9700\u8981\u624b\u52d5\u6a19\u8a18\u751f\u547d\u9031\u671f\u3002\u76f8\u5c0d\u7684\uff0c\u5982\u679c\u4e0d\u8003\u616e\u592a\u591a\u6240\u6709\u6b0a\u7684\u4e8b\uff0c\u5c31\u7b97\u6574\u500b\u5c08\u6848\u88e1\u6c92\u6709 ",(0,s.jsx)(r.code,{children:"'a"})," \u9019\u6a23\u7684\u751f\u547d\u9031\u671f\u6a19\u8a18\u4e5f\u884c\uff0c\u5c31\u628a Rust \u7576\u505a\u4e00\u822c\u7684\u7a0b\u5f0f\u8a9e\u8a00\u4f86\u5beb\u4e5f\u6c92\u4ec0\u9ebc\u554f\u984c\u3002"]}),"\n",(0,s.jsx)(r.p,{children:"Rust \u7684\u751f\u547d\u9031\u671f\u6a19\u8a18\u662f\u70ba\u4e86\u5e6b\u52a9\u78ba\u4fdd\u7a0b\u5f0f\u78bc\u7684\u5b89\u5168\u6027\uff0c\u6240\u4ee5\u5728\u64b0\u5beb Rust \u7a0b\u5f0f\u78bc\u7684\u6642\u5019\u61c9\u8a72\u9084\u662f\u5f97\u628a\u5b83\u653e\u5fc3\u4e0a\uff0c\u8b39\u614e\u8003\u616e\u662f\u5426\u9700\u8981\u4f7f\u7528\u5b83\u5011\uff0c\u800c\u4e0d\u662f\u5b8c\u5168\u5ffd\u7565\u3002"}),"\n",(0,s.jsx)(r.h2,{id:"struct-\u88e1\u7684\u751f\u547d\u9031\u671f",children:"Struct \u88e1\u7684\u751f\u547d\u9031\u671f"}),"\n",(0,s.jsx)(r.p,{children:"\u518d\u4f86\u770b\u770b\u4e4b\u524d\u4ecb\u7d39\u904e\u7684 Struct\uff1a"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-rust",children:"struct Cat {\r\n    name: String,\r\n    age: u8,\r\n}\r\n\n"})}),"\n",(0,s.jsx)(r.p,{children:"\u8981\u7528\u7684\u6642\u5019\u5c31\u9019\u6a23\u7528\uff1a"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-rust",children:'let kitty = Cat { name: String::from("Kitty"), age: 12 };\n'})}),"\n",(0,s.jsxs)(r.p,{children:["\u7576\u6642\u7528\u7684\u6642\u5019\u61c9\u8a72\u90fd\u4e0d\u89ba\u5f97\u9019\u6709\u4ec0\u9ebc\u554f\u984c\uff0c\u5c31\u662f\u90a3\u500b ",(0,s.jsx)(r.code,{children:"name"})," \u56e0\u70ba\u662f ",(0,s.jsx)(r.code,{children:"String"})," \u578b\u5225\uff0c\u6240\u4ee5\u5f97\u7528 ",(0,s.jsx)(r.code,{children:"String::from()"})," \u6216\u662f\u5b57\u4e32\u5207\u7247\u7684 ",(0,s.jsx)(r.code,{children:".to_string()"})," \u65b9\u6cd5\u8f49\u63db\u4e00\u4e0b\u3002\u8ddf\u5176\u5b83\u7684\u7a0b\u5f0f\u8a9e\u8a00\u6bd4\u8d77\u4f86\u5c31\u771f\u7684\u6709\u9ede\u56c9\u55e6\uff0c\u96e3\u9053\u4e0d\u80fd\u76f4\u63a5\u628a Struct \u88e1\u7684 ",(0,s.jsx)(r.code,{children:"name"})," \u7684\u578b\u5225\u5ba3\u544a\u6210 ",(0,s.jsx)(r.code,{children:"&str"})," \u5c31\u597d\u4e86\uff0c\u50cf\u9019\u6a23\uff1a"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-rust",children:"struct Cat {\r\n    name: &str,\r\n    age: u8,\r\n}\r\n\n"})}),"\n",(0,s.jsx)(r.p,{children:"\u9019\u6a23\u7528\u8d77\u4f86\u4e5f\u7c21\u55ae\u5f97\u591a\uff1a"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-rust",children:'let kitty = Cat { name: "Kitty", age: 12 };\r\n\n'})}),"\n",(0,s.jsx)(r.p,{children:"\u9019\u6a23\u5beb\u7684\u8a71\uff0cRust \u7684\u7de8\u8b6f\u5668\u6703\u7d66\u4f60\u932f\u8aa4\u8a0a\u606f\uff1a"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-css",children:"error[E0106]: missing lifetime specifier\r\n3 |     name: &str,\r\n  |           ^ expected named lifetime parameter\r\n\n"})}),"\n",(0,s.jsxs)(r.p,{children:["\u55ef\uff1f\u9019\u88e1\u9700\u8981\u751f\u547d\u9031\u671f\u6a19\u8a18\uff1f\u600e\u9ebc\u56de\u4e8b\uff1f\u5176\u5be6\u9019\u500b\u6982\u5ff5\u8ddf\u6211\u5011\u5728\u524d\u9762\u4ecb\u7d39\u51fd\u6578\u88e1\u7684\u53c3\u6578\u4ee5\u53ca\u56de\u50b3\u503c\u7684\u751f\u547d\u9031\u671f\u662f\u4e00\u6a23\u7684\u6982\u5ff5\u3002\u60f3\u60f3\u770b\uff0c\u7576\u4f60\u60f3\u8981\u4f7f\u7528 ",(0,s.jsx)(r.code,{children:"Cat"})," \u4f86\u7522\u751f\u4e00\u500b\u65b0\u7684\u5be6\u9ad4\u6642\u5019\uff0c\u7684\u78ba\u662f\u50b3\u4e86\u4e00\u500b\u53c3\u7167\uff08\u5c31\u662f\u90a3\u500b\u5b57\u4e32\u5207\u7247\uff09\u7d66\u9019\u500b Struct\uff0c\u800c\u9019\u500b Struct \u5efa\u7acb\u5be6\u9ad4\u5c31\u6709\u9ede\u50cf\u51fd\u6578\u7684\u56de\u50b3\u503c\uff0c\u9019\u500b\u5be6\u9ad4\u88e1\u9762\u5e36\u6709\u50b3\u9032\u53bb\u7684\u90a3\u500b\u53c3\u7167\u3002\u5373\u4f7f Struct \u88e1\u53ea\u6709\u4e00\u500b\u53c3\u7167\u6b04\u4f4d\uff0c\u70ba\u4e86\u9810\u9632\u53ef\u80fd\u7684\u932f\u8aa4\u548c\u5b89\u5168\u554f\u984c\uff0cRust \u7684\u7de8\u8b6f\u5668\u9700\u8981\u77e5\u9053\u9019\u500b\u53c3\u7167\u7684\u751f\u547d\u9031\u671f\u3002"]}),"\n",(0,s.jsx)(r.p,{children:"\u628a\u539f\u672c\u7684 Struct \u6539\u6210\u9019\u6a23\uff1a"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-rust",children:"struct Cat<'a> {\r\n    name: &'a str,\r\n    age: u8,\r\n}\r\n\n"})}),"\n",(0,s.jsxs)(r.p,{children:["\u9019\u6a23\u8a18\u6a19\u662f\u6307\u8981\u544a\u8a34 Rust \u7de8\u8b6f\u5668\uff0c\u5728 ",(0,s.jsx)(r.code,{children:"Cat"})," \u9019\u500b Struct \u88e1\u9762\u6240\u5f15\u7528\u7684 ",(0,s.jsx)(r.code,{children:"&str"})," \u5b57\u4e32\u5207\u7247\u6b04\u4f4d\uff0c\u5b83\u5f97\u8981\u6d3b\u7684\u6bd4 Struct \u9084\u8981\u4e45\u624d\u884c\u7684\u610f\u601d\uff0c\u7167\u6211\u5011\u4e4b\u524d\u5b78\u904e\u7684\u751f\u547d\u9031\u671f\u7684\u6982\u5ff5\uff0c\u5927\u6982\u662f\u9019\u500b\u6a23\u5b50\uff1a"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-rust",children:'fn main() {\r\n    let cat_name = "Kitty";       //------------+ \'cat_name\r\n                                  //            |\r\n    let kitty = Cat {             //--+ \'kitty  |\r\n        name: cat_name,           //  |         |\r\n        age: 12,                  //  |         |\r\n    };                            //  |         |\r\n                                  //  |         |\r\n    println!("{:?}", kitty);      //  |         |\r\n                                  //--+         |\r\n}                                 //------------+\n'})}),"\n",(0,s.jsx)(r.h3,{id:"impl-\u7684\u751f\u547d\u9031\u671f",children:"Impl \u7684\u751f\u547d\u9031\u671f"}),"\n",(0,s.jsxs)(r.p,{children:["\u4e4b\u524d\u5728 Struct \u7ae0\u7bc0\u6709\u5b78\u904e\u53ef\u4ee5\u4f7f\u7528 ",(0,s.jsx)(r.code,{children:"impl"})," \u5e6b Struct \u5be6\u4f5c\u4e00\u4e9b\u529f\u80fd\uff0c\u50cf\u9019\u6a23\uff1a"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-rust",children:'impl Cat {\r\n    fn say_hello(&self) {\r\n        println!("Hello");\r\n    }\r\n}\r\n\n'})}),"\n",(0,s.jsx)(r.p,{children:"\u4f46\u5982\u679c\u53ea\u5beb\u9019\u6a23\u7684\u8a71\uff0cRust \u7de8\u8b6f\u5668\u6703\u4e0d\u7d66\u904e\uff1a"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-csharp",children:"$ cargo run\r\nerror[E0726]: implicit elided lifetime not allowed here\r\n9 | impl Cat {\r\n  |      ^^^ expected lifetime parameter\r\n\n"})}),"\n",(0,s.jsxs)(r.p,{children:["\u56e0\u70ba\u6211\u5011\u73fe\u5728\u7684 ",(0,s.jsx)(r.code,{children:"Cat"})," \u9019\u500b Struct \u52a0\u4e0a\u4e86\u751f\u547d\u9031\u671f\u7684\u6a19\u8a18 ",(0,s.jsx)(r.code,{children:"<'a>"}),"\uff0c\u800c\u751f\u547d\u9031\u671f\u6a19\u8a3b\u4e5f\u7b97\u662f Struct \u7684\u4e00\u90e8\u5206\uff0c\u6240\u4ee5 ",(0,s.jsx)(r.code,{children:"impl"})," \u7684\u6642\u5019\u4e5f\u5f97\u52a0\uff1a"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-rust",children:"impl<'a> Cat<'a> {\r\n    fn say_hello(&self) {\r\n        println!(\"Hello\");\r\n    }\r\n}\r\n\n"})}),"\n",(0,s.jsxs)(r.p,{children:["\u5c31\u7b97\u5728\u88e1\u9762\u5be6\u4f5c\u7684\u65b9\u6cd5\u4e0d\u9700\u8981\u7279\u5225\u7684\u751f\u547d\u9031\u671f\u6a19\u8a18\u4e5f\u9084\u662f\u5f97\u52a0\uff0c\u547d\u540d\u4e0d\u4e00\u5b9a\u8981\u8ddf Struct \u4e00\u6a23\uff0c\u4f60\u4e5f\u53ef\u4ee5\u7528\u5225\u7684\u5b57\u6bcd\u3002\u4f46\u5982\u679c\u78ba\u5b9a\u6574\u500b ",(0,s.jsx)(r.code,{children:"impl"})," \u88e1\u6c92\u7279\u5225\u7528\u5230\u7684\u8a71\uff0c\u4e5f\u53ef\u4ee5\u7528\u5e95\u7dda\u65b9\u5f0f\u6a19\u8a18\uff1a"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-rust",children:'impl Cat<\'_> {\r\n    fn say_hello(&self) {\r\n        println!("Hello");\r\n    }\r\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"\u6cdb\u578b--\u751f\u547d\u9031\u671f",children:"\u6cdb\u578b + \u751f\u547d\u9031\u671f"}),"\n",(0,s.jsxs)(r.p,{children:["\u662f\u8aaa\uff0c\u5927\u5bb6\u6709\u767c\u73fe\u751f\u547d\u9031\u671f\u7684\u6a19\u8a18\u65b9\u5f0f\u8ddf\u6cdb\u578b\u4e00\u6a23\u90fd\u662f\u4f7f\u7528 ",(0,s.jsx)(r.code,{children:"<...>"})," \u7684\u5beb\u6cd5\u55ce\uff1f\u5982\u679c\u5047\u8a2d\u67d0\u500b Struct \u8981\u6709\u751f\u547d\u9031\u671f\u4e5f\u540c\u6642\u8981\u6709\u6cdb\u578b\uff0c\u5169\u500b\u6df7\u5728\u4e00\u8d77\u7684\u8a71\u8a72\u600e\u9ebc\u5beb\uff1f"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-rust",children:"struct Cat<'a, T> {\r\n    name: &'a str,\r\n    age: T,\r\n}\r\n\n"})}),"\n",(0,s.jsxs)(r.p,{children:["\u6cdb\u578b\u7684\u6a19\u8a18\u6392\u5728\u751f\u547d\u9031\u671f\u5f8c\u9762\uff0c\u5982\u679c\u9806\u5e8f\u4e0d\u5c0d\u7684\u8a71 Rust \u7de8\u8b6f\u5668\u6703\u63d0\u9192\u4f60\u3002\u9019\u9ebc\u4e00\u4f86\uff0c",(0,s.jsx)(r.code,{children:"impl"})," \u4e5f\u5f97\u6539\u4e00\u4e0b\uff1a"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-rust",children:'impl<T> Cat<\'_, T> {\r\n    fn say_hello(&self) {\r\n        println!("Hello");\r\n    }\r\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"enum-\u88e1\u7684\u751f\u547d\u9031\u671f",children:"Enum \u88e1\u7684\u751f\u547d\u9031\u671f"}),"\n",(0,s.jsxs)(r.p,{children:["\u6211\u5011\u5728\u4ecb\u7d39 Enum \u7684\u7ae0\u7bc0\u88e1\u66fe\u7d93\u63d0\u904e\uff0cRust \u88e1\u7684 Enum \u7528\u8d77\u4f86\u8ddf Struct \u633a\u50cf\u7684\uff0c\u9664\u4e86\u5b9a\u7fa9\u8b8a\u9ad4\uff08Variant\uff09\u4e4b\u5916\uff0c\u4e5f\u53ef\u4ee5\u900f\u904e ",(0,s.jsx)(r.code,{children:"impl"})," \u5e6b\u5b83\u52a0\u4e00\u4e9b\u529f\u80fd\u3002\u65e2\u7136 Struct \u6709\u751f\u547d\u9031\u671f\u6a19\u8a18\uff0c\u8ddf\u5b83\u5f88\u50cf\u7684 Enum \u4e5f\u53ef\u4ee5\u6709\uff1a"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-rust",children:"enum CatBreed<'a> {\r\n    Persian,             // \u6ce2\u65af\u8c93\r\n    AmericanShorthair,   // \u7f8e\u570b\u77ed\u6bdb\u8c93\r\n    Mix(&'a str, u8),    // \u7c73\u514b\u65af\r\n}\r\n\n"})}),"\n",(0,s.jsxs)(r.p,{children:["\u6574\u500b\u7528\u8d77\u4f86\u7684\u624b\u611f\u8ddf Struct \u5dee\u4e0d\u591a\uff0c\u7576\u7136 ",(0,s.jsx)(r.code,{children:"impl"})," \u7684\u5beb\u6cd5\u4e5f\u5dee\u4e0d\u591a\uff1a"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-rust",children:'impl CatBreed<\'_> {\r\n    fn say_something() {\r\n        println!("Hey!");\r\n    }\r\n}\r\n\n'})})]})}function o(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>c,x:()=>l});var t=n(6540);const s={},i=t.createContext(s);function c(e){const r=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(i.Provider,{value:r},e.children)}}}]);