"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[2097],{6135:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>l,frontMatter:()=>c,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"\u5b78\u7fd2/rust/rustbasic/rust_\u5c6c\u6027_Attributes","title":"19-rust_\u5c6c\u6027_Attributes","description":"_\u5c6c\u6027_Attributes","source":"@site/docs/\u5b78\u7fd2/rust/rustbasic/19-rust_\u5c6c\u6027_Attributes.md","sourceDirName":"\u5b78\u7fd2/rust/rustbasic","slug":"/\u5b78\u7fd2/rust/rustbasic/rust_\u5c6c\u6027_Attributes","permalink":"/my-blog/docs/\u5b78\u7fd2/rust/rustbasic/rust_\u5c6c\u6027_Attributes","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":19,"frontMatter":{"\uff03id":"doc-markdown","title":"19-rust_\u5c6c\u6027_Attributes","description":"_\u5c6c\u6027_Attributes","keywords":["rust"],"last_update":{"date":"4/24/2024","author":"ttom"}},"sidebar":"tutorialSidebar","previous":{"title":"18-rust_\u932f\u8aa4\u8655\u7406_Error Handling","permalink":"/my-blog/docs/\u5b78\u7fd2/rust/rustbasic/rust_\u932f\u8aa4\u8655\u7406_Error Handling"},"next":{"title":"20-rust_\u6e2c\u8a66_Test","permalink":"/my-blog/docs/\u5b78\u7fd2/rust/rustbasic/rust_\u6e2c\u8a66_Test"}}');var s=r(4848),i=r(8453);const c={"\uff03id":"doc-markdown",title:"19-rust_\u5c6c\u6027_Attributes",description:"_\u5c6c\u6027_Attributes",keywords:["rust"],last_update:{date:"4/24/2024",author:"ttom"}},a=void 0,d={},o=[];function u(e){const t={a:"a",code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"\u4e0d\u77e5\u9053\u5404\u4f4d\u5728\u770b\u4e00\u4e9b Rust \u7684\u539f\u59cb\u78bc\uff0c\u6216\u662f\u7db2\u8def\u4e0a\u5225\u4eba\u5beb\u7684\u7bc4\u4f8b\u7684\u6642\u5019\uff0c\u662f\u5426\u5e38\u770b\u5230\u4e00\u4e9b\u8a9e\u6cd5\uff0c\u5b83\u5011\u770b\u8d77\u4f86\u597d\u50cf\u4e0d\u592a\u50cf Rust \u7684\u7a0b\u5f0f\u78bc\uff0c\u5012\u662f\u6709\u9ede\u50cf\u8a3b\u89e3\uff0c\u4f8b\u5982\uff1a"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-rust",children:"#[allow(dead_code)]\r\n\n"})}),"\n",(0,s.jsx)(t.p,{children:"\u9019\u6a23\u7684\u5beb\u6cd5\u5728 Rust \u88e1\u7a31\u4e4b\u300c\u5c6c\u6027\uff08Attributes\uff09\u300d\uff0c\u5b83\u53ef\u4ee5\u7528\u4f86\u63d0\u4f9b\u984d\u5916\u7684\u8a0a\u606f\u6216\u6307\u5c0e Rust \u7de8\u8b6f\u5668\u7684\u4e00\u4e9b\u884c\u70ba\u3002\u8209\u4f8b\u4f86\u8aaa\uff0c\u5047\u8a2d\u6211\u6709\u4e00\u500b Struct \u50cf\u9019\u6a23\uff1a"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-rust",children:"struct Cat {\r\n    name: String,\r\n    age: u8,\r\n}\r\n\n"})}),"\n",(0,s.jsxs)(t.p,{children:["\u5982\u679c\u6211\u60f3\u7528 ",(0,s.jsx)(t.code,{children:"println!()"})," \u628a\u5b83\u5370\u51fa\u4f86\uff1a"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-rust",children:'let kitty = Cat { name: String::from("Kitty"), age: 18 };\r\nprintln!("{:?}", kitty);\r\n\n'})}),"\n",(0,s.jsx)(t.p,{children:"Rust \u7684\u7de8\u8b6f\u5668\u6703\u8ddf\u4f60\u8aaa\u6c92\u8fa6\u6cd5\u9019\u6a23\u5370\uff1a"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-rust",children:'$  cargo run\r\nerror[E0277]: `Cat` doesn\'t implement `Debug`\r\n11 |     println!("{:?}", kitty);\r\n   |                      ^^^^^ `Cat` cannot be formatted using `{:?}`\r\n   |\r\n   = help: the trait `Debug` is not implemented for `Cat`\r\n   = note: add `#[derive(Debug)]` to `Cat` or manually `impl Debug for Cat`\r\n   = note: this error originates in the macro `$crate::format_args_nl` which comes from the expansion of the macro `println` (in Nightly builds, run with -Z macro-backtrace for more info)\r\nhelp: consider annotating `Cat` with `#[derive(Debug)]`\r\n\n'})}),"\n",(0,s.jsxs)(t.p,{children:["\u70ba\u4ec0\u9ebc\u4e0d\u884c\uff1f\u56e0\u70ba\u5728 ",(0,s.jsx)(t.code,{children:"println!()"})," \u5de8\u96c6\u88e1\u5982\u679c\u653e\u7684\u662f ",(0,s.jsx)(t.code,{children:"{:?}"})," \u7684\u8a71\uff0c\u610f\u601d\u662f\u6703\u7528 debug \u6a21\u5f0f\u4f86\u5370\u6771\u897f\u3002\u6839\u64da Rust \u7de8\u8b6f\u5668\u7d66\u4f60\u7684\u63d0\u793a\u4e4b\u4e00\uff0c\u8aaa ",(0,s.jsx)(t.code,{children:"Cat"})," \u9019\u500b Struct \u4e26\u6c92\u6709 ",(0,s.jsx)(t.code,{children:"Debug"})," \u7684\u7279\u5fb5\u3002\u96d6\u7136\u63d0\u793a\u6709\u63d0\u5230\u53ef\u4ee5\u81ea\u5df1\u624b\u52d5\u5be6\u4f5c ",(0,s.jsx)(t.code,{children:"Debug"})," \u7279\u5fb5\uff0c\u4f46\u9084\u597d Rust \u6709\u5148\u5e6b\u6211\u5011\u5beb\u597d\u4e0d\u5c11\u7684 Trait\uff0c\u5176\u4e2d\u4e00\u500b\u5c31\u662f ",(0,s.jsx)(t.code,{children:"Debug"}),"\uff0c\u6211\u5011\u5c31\u76f4\u63a5\u628a\u5b83\u62ff\u4f86\u7528\uff0c\u50cf\u9019\u6a23\uff1a"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-rust",children:"#[derive(Debug)]\r\nstruct Cat {\r\n    name: String,\r\n    age: u8,\r\n}\r\n\n"})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"derive"})," \u4e2d\u6587\u53ef\u7ffb\u8b6f\u6210\u300c\u884d\u751f\u300d\u6216\u300c\u6d3e\u751f\u300d\uff0c\u9019\u53e5\u4e0a\u9762\u90a3\u500b\u770b\u8d77\u4f86\u6709\u9ede\u50cf\u8a3b\u89e3\u7684\u5beb\u6cd5\uff0c\u4ee5\u7d50\u679c\u4f86\u8aaa\uff0c\u6709\u9ede\u50cf\u662f\u5e6b\u539f\u672c\u7684 Struct \u52a0\u4e0a\u4e86 ",(0,s.jsx)(t.code,{children:"Debug"})," \u7279\u5fb5\uff0c\u53c8\u56e0\u70ba ",(0,s.jsx)(t.code,{children:"Debug"})," \u7279\u5fb5\u662f Rust \u539f\u672c\u5c31\u5e6b\u6211\u5011\u5beb\u597d\u7684\uff0c\u6240\u4ee5\u5c31\u4e0d\u7528\u7279\u5225\u81ea\u5df1\u518d\u5beb\u4e00\u6b21\u4e86\u3002"]}),"\n",(0,s.jsx)(t.p,{children:"\u53ef\u4ee5\u5370\u51fa\u4f86\u4e86\uff0c\u4f46\u7a0b\u5f0f\u78bc\u57f7\u884c\u4e4b\u5f8c\u767c\u73fe Rust \u7de8\u8b6f\u5668\u53c8\u8ddf\u6211\u5011\u62b1\u6028\u4e86\u4e00\u4e0b\uff1a"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-rust",children:"$ cargo run\r\nwarning: fields `name` and `age` are never read\r\n2 | struct Cat {\r\n  |        --- fields in this struct\r\n3 |     name: String,\r\n  |     ^^^^\r\n4 |     age: u8,\r\n  |     ^^^\r\n  |\r\n  = note: `Cat` has a derived impl for the trait `Debug`, but this is intentionally ignored during dead code analysis\r\n  = note: `#[warn(dead_code)]` on by default\r\n\n"})}),"\n",(0,s.jsxs)(t.p,{children:["\u4e0d\u662f\u932f\u8aa4\uff0c\u53ea\u6709\u8b66\u544a\u63d0\u9192\u800c\u5df2\uff0c\u5c31\u662f\u8ddf\u4f60\u8aaa ",(0,s.jsx)(t.code,{children:"name"})," \u8ddf ",(0,s.jsx)(t.code,{children:"age"})," \u9019\u5169\u500b\u6b04\u4f4d\u4f60\u90fd\u6c92\u7528\u5230\uff0c\u9019\u500b\u6211\u5011\u4e4b\u524d\u4e5f\u770b\u904e\uff0c\u5c0d Rust \u4f86\u8aaa\u7b97\u662f\u4e00\u500b ",(0,s.jsx)(t.code,{children:"dead_code"}),"\uff0c\u5982\u679c\u4f60\u77e5\u9053\u9019\u4e9b\u6b04\u4f4d\u665a\u4e9b\u6703\u7528\u5230\uff0c\u540c\u6a23\u53ef\u4ee5\u52a0\u4e0a\u5c6c\u6027\u544a\u8a34\u5b83\u300c\u6211\u53ef\u4ee5\u5141\u8a31 ",(0,s.jsx)(t.code,{children:"dead_code"}),"\u300d\uff1a"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-rust",children:"#[derive(Debug)]\r\n#[allow(dead_code)]\r\nstruct Cat {\r\n    name: String,\r\n    age: u8,\r\n}\r\n\n"})}),"\n",(0,s.jsx)(t.p,{children:"\u4f60\u672c\u4eba\u90fd\u8aaa\u5141\u8a31\u4e86\uff0cRust \u7de8\u8b6f\u5668\u5b83\u5c31\u6703\u5e97\u5e97\u4e0d\u8b1b\u8a71\u4e86\u3002"}),"\n",(0,s.jsxs)(t.p,{children:["\u9084\u6709\u50cf\u662f ",(0,s.jsx)(t.code,{children:"#[test]"})," \u4ee5\u53ca ",(0,s.jsx)(t.code,{children:"#[cfg(test)]"})," \u6211\u5011\u5728\u5f8c\u9762\u4ecb\u7d39\u6e2c\u8a66\u7684\u7ae0\u7bc0\u6703\u518d\u6b21\u770b\u5230\u5b83\u5011\u3002\u66f4\u591a\u7684\u5c6c\u6027\u53ef\u53c3\u95b1 ",(0,s.jsx)(t.a,{href:"https://doc.rust-lang.org/reference/attributes.html",children:"Rust \u5b98\u65b9\u624b\u518a"}),"\u8aaa\u660e\u3002"]}),"\n",(0,s.jsxs)(t.p,{children:["\u5728 Rust \u4e2d\uff0c\u5c6c\u6027\u4e00\u958b\u59cb\u770b\u7684\u6642\u5019\uff0c\u6703\u4ee5\u70ba\u662f\u8a3b\u89e3\uff0c\u4f46\u5176\u5be6\u5b83\u662f\u53ef\u4ee5\u7528\u65bc\u4f86\u63d0\u4f9b\u984d\u5916\u7684\u8a0a\u606f\u6216\u6307\u5c0e Rust \u7de8\u8b6f\u5668\u7684\u884c\u70ba\uff0c\u50cf\u662f\u81ea\u52d5\u751f\u6210\u7a0b\u5f0f\u78bc\u6216\u662f\u66ab\u6642\u6291\u5236\u8b66\u544a\u8a0a\u606f\u7b49\u529f\u80fd\u3002\u5c6c\u6027\u662f\u4e00\u7a2e\u7528\u65bc\u63d0\u4f9b\u984d\u5916\u4fe1\u606f\u548c\u6307\u5c0e\u7de8\u8b6f\u5668\u3001\u5de5\u5177\u6216\u5b8f\u7684\u6a19\u8a18\u6216\u8a3b\u89e3\u3002\u5b83\u5011\u4ee5 ",(0,s.jsx)(t.code,{children:"#[...]"})," \u7684\u5f62\u5f0f\u51fa\u73fe\u5728\u4ee3\u78bc\u4e2d\uff0c\u901a\u5e38\u4f4d\u65bc\u8b8a\u6578\u3001\u51fd\u6578\u3001\u7d50\u69cb\u3001\u679a\u8209\u3001\u6a21\u7d44\u7b49\u8072\u660e\u7684\u524d\u9762\u3002\u5c6c\u6027\u53ef\u4ee5\u5f71\u97ff\u7a0b\u5f0f\u78bc\u7684\u884c\u70ba\u3001\u4ee3\u78bc\u751f\u6210\u3001\u8b66\u544a\u6291\u5236\u7b49\u3002"]}),"\n",(0,s.jsx)(t.p,{children:"\u9664\u4e86\u5167\u5efa\u7684\u5c6c\u6027\u4e4b\u5916\uff0c\u5982\u679c\u60f3\u8981\u81ea\u5df1\u5beb\u81ea\u5df1\u5c08\u5c6c\u7684\u5c6c\u6027\u4e5f\u6c92\u554f\u984c\uff0c\u4f46\u6703\u7528\u5230\u5de8\u96c6\uff08Macro\uff09\u7684\u5beb\u6cd5\uff0c\u9019\u5f85\u5f8c\u7e8c\u4ecb\u7d39\u5b8c\u5de8\u96c6\u4e4b\u5f8c\u6211\u5011\u518d\u4f86\u770b\u770b\u600e\u9ebc\u5beb\u3002"})]})}function l(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453:(e,t,r)=>{r.d(t,{R:()=>c,x:()=>a});var n=r(6540);const s={},i=n.createContext(s);function c(e){const t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);